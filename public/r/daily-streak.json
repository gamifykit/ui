{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "daily-streak",
  "type": "registry:component",
  "title": "Daily Streak",
  "description": "A card component that displays a user's daily streak with a 7-day dot grid",
  "registryDependencies": [
    "card",
    "badge"
  ],
  "files": [
    {
      "path": "registry/new-york/components/daily-streak.tsx",
      "content": "import { cva } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\n\nexport type StreakDay = {\n  date: Date | string;\n  done: boolean;\n};\n\nexport interface DailyStreakProps extends React.ComponentProps<typeof Card> {\n  title?: string;\n  currentStreak: number;\n  bestStreak?: number;\n  days?: StreakDay[];\n  daysToShow?: number; // default 7\n  showBestBadge?: boolean;\n  showLabels?: boolean; // show weekday labels beneath dots\n}\n\nconst dotVariants = cva(\n  \"size-8 rounded-full border transition-all duration-200\",\n  {\n    variants: {\n      state: {\n        on: \"bg-primary border-primary/80 shadow-[0_0_0_3px] shadow-primary/20\",\n        off: \"bg-muted border-border\",\n        todayOn:\n          \"bg-primary border-primary/80 ring-2 ring-offset-2 ring-primary/40\",\n        todayOff:\n          \"bg-muted border-border ring-2 ring-offset-2 ring-muted-foreground/20\",\n      },\n      size: {\n        sm: \"size-6\",\n        md: \"size-8\",\n        lg: \"size-10\",\n      },\n    },\n    defaultVariants: {\n      state: \"off\",\n      size: \"md\",\n    },\n  },\n);\n\nfunction normalizeDays(days?: StreakDay[], daysToShow = 7): { date: Date; done: boolean }[] {\n  const today = new Date();\n  // If not provided, generate an empty array of last N days with done=false\n  const arr: { date: Date; done: boolean }[] = [];\n  if (!days || days.length === 0) {\n    for (let i = daysToShow - 1; i >= 0; i--) {\n      const d = new Date(today);\n      d.setDate(today.getDate() - i);\n      arr.push({ date: d, done: false });\n    }\n    return arr;\n  }\n  // Map input to a dictionary by yyyy-mm-dd\n  const toKey = (d: Date) => d.toISOString().slice(0, 10);\n  const map = new Map<string, boolean>();\n  for (const item of days) {\n    const d = typeof item.date === \"string\" ? new Date(item.date) : item.date;\n    map.set(toKey(d), !!item.done);\n  }\n  for (let i = daysToShow - 1; i >= 0; i--) {\n    const d = new Date(today);\n    d.setDate(today.getDate() - i);\n    const key = toKey(d);\n    arr.push({ date: d, done: map.get(key) ?? false });\n  }\n  return arr;\n}\n\nfunction weekdayShort(date: Date) {\n  return date.toLocaleDateString(undefined, { weekday: \"short\" });\n}\n\nfunction isSameDay(a: Date, b: Date) {\n  return (\n    a.getFullYear() === b.getFullYear() &&\n    a.getMonth() === b.getMonth() &&\n    a.getDate() === b.getDate()\n  );\n}\n\nexport function DailyStreak({\n  title = \"DAILY STREAK\",\n  currentStreak,\n  bestStreak,\n  days,\n  daysToShow = 7,\n  showBestBadge = true,\n  showLabels = true,\n  className,\n  ...props\n}: DailyStreakProps) {\n  const normalized = React.useMemo(\n    () => normalizeDays(days, daysToShow),\n    [days, daysToShow],\n  );\n  const today = new Date();\n\n  return (\n    <Card className={cn(\"w-full\", className)} {...props}>\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-sm font-medium tracking-widest text-muted-foreground\">\n          {title}\n        </CardTitle>\n        {showBestBadge && typeof bestStreak === \"number\" && (\n          <Badge variant=\"secondary\" className=\"gap-1\">\n            ðŸ”¥ Best {bestStreak}\n          </Badge>\n        )}\n      </CardHeader>\n      <CardContent className=\"pt-0\">\n        <div className=\"flex items-end justify-between\">\n          <div>\n            <div className=\"text-3xl font-bold leading-none\">{currentStreak}</div>\n            <p className=\"text-xs text-muted-foreground\">day streak</p>\n          </div>\n          <div className=\"flex items-center gap-2 text-amber-500\">\n            <span aria-hidden>ðŸ”¥</span>\n            <span className=\"sr-only\">Flame icon</span>\n          </div>\n        </div>\n\n        <div className=\"mt-6 grid grid-cols-7 gap-2\">\n          {normalized.map((item, idx) => {\n            const todayFlag = isSameDay(item.date, today);\n            const state = item.done\n              ? todayFlag\n                ? \"todayOn\"\n                : \"on\"\n              : todayFlag\n                ? \"todayOff\"\n                : \"off\";\n            return (\n              <div key={idx} className=\"flex flex-col items-center gap-1\">\n                <div\n                  className={cn(dotVariants({ state: state as any, size: \"md\" }))}\n                  title={`${weekdayShort(item.date)} - ${item.done ? \"Done\" : \"Missed\"}`}\n                  role=\"img\"\n                  aria-label={`${weekdayShort(item.date)} ${item.done ? \"completed\" : \"missed\"}`}\n                />\n                {showLabels && (\n                  <span className=\"text-[10px] text-muted-foreground\">\n                    {weekdayShort(item.date).slice(0, 2)}\n                  </span>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default DailyStreak;\n",
      "type": "registry:component"
    }
  ]
}